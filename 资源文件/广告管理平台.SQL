--   -------------------------------------------------- 
--   Generated by Enterprise Architect Version 8.0.858
--   Created On : 星期一, 25 八月, 2014 
--   DBMS       : MySql 
--   -------------------------------------------------- 


SET FOREIGN_KEY_CHECKS=0;


--  Drop Tables, Stored Procedures and Views 

DROP TABLE IF EXISTS ad_info
;
DROP TABLE IF EXISTS ad_spread
;
DROP TABLE IF EXISTS ad_spread_day
;
DROP TABLE IF EXISTS channel_user
;
DROP TABLE IF EXISTS revenue
;

--  Create Tables 
CREATE TABLE ad_info
(
	id BIGINT NOT NULL COMMENT '主键',
	ad_name VARCHAR(50) COMMENT '广告名',
	advertiser VARCHAR(50) COMMENT '广告商',
	ad_type VARCHAR(50) COMMENT '广告类型',
	unit_price DOUBLE COMMENT '广告单价',
	shelves_time VARCHAR(20) COMMENT '上架时间',
	off_shelves_time VARCHAR(20) COMMENT '下架时间',
	ad_platform_login VARCHAR(50) COMMENT '广告主平台登录名',
	ad_platform_pwd VARCHAR(50) COMMENT '广告主平台登录密码',
	PRIMARY KEY (id)
)  COMMENT='广告主信息表'
;


CREATE TABLE ad_spread
(
	id BIGINT NOT NULL AUTO_INCREMENT COMMENT '主键',
	ad_id BIGINT COMMENT '广告ID',
	qd_id BIGINT COMMENT '渠道ID',
	package_name VARCHAR(20) COMMENT '包名',
	download_url VARCHAR(250) COMMENT '下载地址',
	rebate_prop INTEGER COMMENT '折扣比例',
	rebate_since INTEGER COMMENT '折扣起量',
	rebate_since_flag TINYINT DEFAULT 0 COMMENT '起量参考标识 0：表示需要保证起量值 1：表示可以直接折扣',
	PRIMARY KEY (id),
	KEY (ad_id),
	KEY (qd_id)
)  COMMENT='推广包信息表'
;


CREATE TABLE ad_spread_day
(
	id BIGINT NOT NULL AUTO_INCREMENT COMMENT '主键',
	spread_id BIGINT COMMENT '推广包ID',
	spread_date VARCHAR(10) COMMENT '推广日期',
	active_revenue BIGINT COMMENT '收入激活量（来源于广告主平台）',
	active_expenses BIGINT COMMENT '支出激活量（用于展示给渠道）',
	PRIMARY KEY (id),
	KEY (spread_id)
)  COMMENT='推广包日报表'
;


CREATE TABLE channel_user
(
	id BIGINT NOT NULL AUTO_INCREMENT COMMENT '主键',
	qd_login VARCHAR(20) COMMENT '渠道登录名',
	qd_password VARCHAR(255) COMMENT '登录密码',
	qd_name VARCHAR(20) COMMENT '渠道名称',
	spread_price DOUBLE COMMENT '推广单价',
	bank_name VARCHAR(50) COMMENT '开户行',
	bank_account VARCHAR(50) COMMENT '银行账号',
	bank_user VARCHAR(50) COMMENT '开户名',
	PRIMARY KEY (id)
)  COMMENT='渠道用户表'
;


CREATE TABLE revenue
(
	id BIGINT NOT NULL AUTO_INCREMENT COMMENT '主键',
	ad_id BIGINT COMMENT '广告ID',
	start_day VARCHAR(20) COMMENT '入账开始日期（包含）',
	end_day VARCHAR(20) COMMENT '入账结束日期（包含）',
	generate_time VARCHAR(20) COMMENT '生成时间',
	money DOUBLE COMMENT '账款',
	PRIMARY KEY (id),
	UNIQUE UQ_revenue_id(id)
)  COMMENT='入账表'
;



SET FOREIGN_KEY_CHECKS=1;
